{"version":3,"file":"index.js","sources":["../../../src/blocks/buttons/edit.jsx","../../../src/blocks/buttons/index.jsx"],"sourcesContent":["import {\n  useBlockProps,\n  RichText,\n  BlockControls,\n  InspectorControls,\n  useBlockEditContext,\n} from \"@wordpress/block-editor\";\nimport {\n  ToolbarButton,\n  ToolbarGroup,\n  Dropdown,\n  SelectControl,\n  ComboboxControl,\n  Button,\n  PanelBody,\n  BaseControl,\n  ButtonGroup,\n  ToggleControl,\n  TextControl,\n  Spinner,\n  Modal,\n  SearchControl,\n  __experimentalToggleGroupControl as ToggleGroupControl,\n  __experimentalToggleGroupControlOption as ToggleGroupControlOption,\n} from \"@wordpress/components\";\n// Icônes Lucide personnalisées (remplacent @wordpress/icons)\nconst LucideIcon = ({ children, ...props }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    width=\"24\"\n    height=\"24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    {...props}\n  >\n    {children}\n  </svg>\n);\n\nconst justifyLeft = (\n  <LucideIcon>\n    <path d=\"M4 6h16\" />\n    <path d=\"M4 12h10\" />\n    <path d=\"M4 18h14\" />\n  </LucideIcon>\n);\n\nconst justifyCenter = (\n  <LucideIcon>\n    <path d=\"M4 6h16\" />\n    <path d=\"M7 12h10\" />\n    <path d=\"M5 18h14\" />\n  </LucideIcon>\n);\n\nconst justifyRight = (\n  <LucideIcon>\n    <path d=\"M4 6h16\" />\n    <path d=\"M10 12h10\" />\n    <path d=\"M6 18h14\" />\n  </LucideIcon>\n);\n\nconst justifySpaceBetween = (\n  <LucideIcon>\n    <path d=\"M4 6h16\" />\n    <path d=\"M4 12h16\" />\n    <path d=\"M4 18h16\" />\n  </LucideIcon>\n);\n\nconst settingsIcon = (\n  <LucideIcon>\n    <path d=\"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\" />\n    <circle cx=\"12\" cy=\"12\" r=\"3\" />\n  </LucideIcon>\n);\n\nconst trashIcon = (\n  <LucideIcon>\n    <path d=\"M3 6h18\" />\n    <path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\" />\n    <path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\" />\n    <line x1=\"10\" x2=\"10\" y1=\"11\" y2=\"17\" />\n    <line x1=\"14\" x2=\"14\" y1=\"11\" y2=\"17\" />\n  </LucideIcon>\n);\nimport { useState, useMemo, useEffect } from \"@wordpress/element\";\nimport { useSelect } from \"@wordpress/data\";\nimport { sprintf, _n } from \"@wordpress/i18n\";\nimport apiFetch from \"@wordpress/api-fetch\";\n\nexport default function Edit({ attributes, setAttributes, clientId }) {\n  // DEBUG: Log au montage du composant\n  console.log('[buttons-v2] Edit component mounted');\n  console.log('[buttons-v2] attributes:', attributes);\n  console.log('[buttons-v2] clientId:', clientId);\n  console.log('[buttons-v2] window.siteforgeConfig:', window.siteforgeConfig);\n\n  const {\n    data = {\n      settings: {\n        justifyValue: \"justify-start\",\n        flexWrap: true,\n        gap: \"1rem\",\n      },\n      buttons: [],\n    },\n  } = attributes;\n\n  // Fonction pour générer un ID unique basé sur le clientId du bloc et un timestamp\n  const generateUniqueId = () => {\n    return `${clientId}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  };\n\n  // S'assurer que tous les boutons existants ont un ID unique\n  const ensureButtonIds = (buttonsArray) => {\n    return buttonsArray.map((btn, index) => ({\n      ...btn,\n      id: btn.id || `${clientId}-btn-${index}-${Date.now()}`\n    }));\n  };\n\n  const { settings: layoutSettings, buttons } = data;\n\n  // State pour les styles de boutons récupérés depuis l'API\n  const [buttonStyles, setButtonStyles] = useState([]);\n  const [buttonStylesData, setButtonStylesData] = useState([]); // Garde les données complètes\n  const [loadingStyles, setLoadingStyles] = useState(true);\n\n  // State pour la modale d'icônes (au niveau parent pour éviter les problèmes de z-index)\n  const [iconPickerState, setIconPickerState] = useState({\n    isOpen: false,\n    buttonIndex: null,\n    currentValue: '',\n  });\n  const [lucideIcons, setLucideIcons] = useState([]);\n  const [loadingIcons, setLoadingIcons] = useState(false);\n  const [iconSearchQuery, setIconSearchQuery] = useState(\"\");\n\n  // URL du sprite Lucide\n  const spriteUrl = window.siteforgeConfig?.spriteUrl || '';\n\n  // Charger les icônes quand la modale s'ouvre\n  useEffect(() => {\n    if (iconPickerState.isOpen && lucideIcons.length === 0) {\n      const fetchIcons = async () => {\n        setLoadingIcons(true);\n        try {\n          const data = await apiFetch({ path: '/siteforge/v1/icons' });\n          setLucideIcons(data.icons || []);\n        } catch (error) {\n          console.error('[buttons-v2] Erreur lors de la récupération des icônes:', error);\n          setLucideIcons([]);\n        } finally {\n          setLoadingIcons(false);\n        }\n      };\n      fetchIcons();\n    }\n  }, [iconPickerState.isOpen, lucideIcons.length]);\n\n  // Fonctions pour la modale d'icônes\n  const openIconPicker = (buttonIndex, currentValue) => {\n    setIconSearchQuery(\"\");\n    setIconPickerState({ isOpen: true, buttonIndex, currentValue });\n  };\n\n  const closeIconPicker = () => {\n    setIconPickerState({ isOpen: false, buttonIndex: null, currentValue: '' });\n  };\n\n  const handleIconSelect = (iconSlug) => {\n    if (iconPickerState.buttonIndex !== null) {\n      updateButton(iconPickerState.buttonIndex, \"icon\", iconSlug);\n    }\n    closeIconPicker();\n  };\n\n  // Vérifier et ajouter les IDs manquants aux boutons existants\n  useEffect(() => {\n    const buttonsNeedIds = buttons.some(btn => !btn.id);\n    if (buttonsNeedIds && buttons.length > 0) {\n      const buttonsWithIds = ensureButtonIds(buttons);\n      setAttributes({\n        data: {\n          ...data,\n          buttons: buttonsWithIds,\n        },\n      });\n    }\n  }, [clientId]); // Se déclenche si clientId change\n\n  // Récupère dynamiquement les styles depuis la route WP REST API SiteForge\n  useEffect(() => {\n    const fetchStyles = async () => {\n      console.log('[buttons-v2] Fetching button styles from API...');\n      try {\n        const styles = await apiFetch({ path: '/siteforge/v1/button-styles' });\n        console.log('[buttons-v2] Button styles received:', styles);\n\n        const styleOptions = styles.map((style) => ({\n          label: style.variables?.title || style.label || style.name.replace(/^btn-/, \"\").replace(/-/g, \" \"),\n          value: style.name,\n        }));\n\n        setButtonStyles(styleOptions);\n        setButtonStylesData(styles); // Stocke les données complètes pour l'utilisation des variables\n      } catch (error) {\n        console.error(\"[buttons-v2] Erreur API button-styles:\", error);\n        setButtonStyles([{ label: \"Primaire\", value: \"btn-primary\" }]);\n        setButtonStylesData([]);\n      } finally {\n        setLoadingStyles(false);\n      }\n    };\n\n    fetchStyles();\n  }, []);\n\n  const updateSettings = (key, value) => {\n    setAttributes({\n      data: {\n        ...data,\n        settings: {\n          ...layoutSettings,\n          [key]: value,\n        },\n      },\n    });\n  };\n\n  const updateButton = (index, key, value) => {\n    const newButtons = [...buttons];\n    \n    // S'assurer que la structure link existe si on la modifie\n    if (key === \"link\" && !newButtons[index].link) {\n      newButtons[index].link = {\n        url: \"\",\n        title: \"\",\n        target: \"\",\n        type: \"url\",\n        postId: 0,\n        termId: 0,\n        taxonomy: \"\",\n        postType: \"\",\n      };\n    }\n    \n    newButtons[index][key] = value;\n    setAttributes({\n      data: {\n        ...data,\n        buttons: newButtons,\n      },\n    });\n  };\n\n  const addButton = () => {\n    const defaultButtonType = buttonStyles.length ? buttonStyles[0].value : \"btn-primary\";\n    const defaultIconPosition = getDefaultIconPosition(defaultButtonType);\n    const defaultIcon = getDefaultIcon(defaultButtonType);\n    \n    setAttributes({\n      data: {\n        ...data,\n        buttons: [\n          ...buttons,\n          {\n            id: generateUniqueId(), // Ajout d'un ID unique\n            title: \"Texte du bouton\",\n            type: defaultButtonType,\n            icon: defaultIcon, // Sera vide si pas d'icon-default définie\n            icon_position: defaultIconPosition,\n            link: {\n              url: \"\",\n              title: \"\",\n              target: \"\",\n              type: \"url\",\n              postId: 0,\n              termId: 0,\n              taxonomy: \"\",\n              postType: \"\",\n            },\n            class: \"\",\n            download: false,\n            data: {},\n          },\n        ],\n      },\n    });\n  };\n\n  const removeButton = (i) => {\n    const newButtons = [...buttons];\n    newButtons.splice(i, 1);\n    setAttributes({\n      data: {\n        ...data,\n        buttons: newButtons,\n      },\n    });\n  };\n\n  const decodeEntities = (html) => {\n    const textarea = document.createElement(\"textarea\");\n    textarea.innerHTML = html;\n    return textarea.value;\n  };\n\n  // Fonction utilitaire pour récupérer les variables d'un style de bouton\n  const getButtonStyleVariables = (buttonType) => {\n    const styleData = buttonStylesData.find(style => style.name === buttonType);\n    return styleData?.variables || {};\n  };\n\n  // Fonction utilitaire pour vérifier si une fonctionnalité est désactivée\n  const isFeatureDisabled = (buttonType, featureName) => {\n    const variables = getButtonStyleVariables(buttonType);\n    return variables[featureName] === \"false\";\n  };\n\n  // Fonction utilitaire pour vérifier si les icônes sont autorisées\n  const areIconsEnabled = (buttonType) => {\n    const variables = getButtonStyleVariables(buttonType);\n    // Si la variable n'existe pas, on garde le comportement par défaut (true)\n    return variables[\"icon\"] !== \"false\";\n  };\n\n  // Fonction utilitaire pour vérifier si le déplacement d'icône est autorisé\n  const isIconMoveEnabled = (buttonType) => {\n    const variables = getButtonStyleVariables(buttonType);\n    // Si la variable n'existe pas, on garde le comportement par défaut (true)\n    return variables[\"icon-move\"] !== \"false\";\n  };\n\n  // Fonction utilitaire pour récupérer la position d'icône par défaut\n  const getDefaultIconPosition = (buttonType) => {\n    const variables = getButtonStyleVariables(buttonType);\n    // Si la variable existe, on l'utilise, sinon on garde \"after\" par défaut\n    return variables[\"icon-position\"] || \"after\";\n  };\n\n  // Fonction utilitaire pour récupérer l'icône par défaut\n  const getDefaultIcon = (buttonType) => {\n    const variables = getButtonStyleVariables(buttonType);\n    return variables[\"icon-default\"] || \"\";\n  };\n\n  // Fonction utilitaire pour vérifier si une icône doit être affichée\n  const shouldShowIcon = (btn) => {\n    const variables = getButtonStyleVariables(btn.type);\n    // Si les icônes sont désactivées mais qu'il y a une icône par défaut, on l'affiche\n    if (variables[\"icon\"] === \"false\" && variables[\"icon-default\"]) {\n      return true;\n    }\n    // Sinon, on affiche l'icône si les icônes sont autorisées et qu'il y a une icône\n    return areIconsEnabled(btn.type) && btn.icon;\n  };\n\n  // Fonction utilitaire pour récupérer l'icône à afficher\n  const getDisplayIcon = (btn) => {\n    const variables = getButtonStyleVariables(btn.type);\n    // Si les icônes sont désactivées mais qu'il y a une icône par défaut, on utilise celle-ci\n    if (variables[\"icon\"] === \"false\" && variables[\"icon-default\"]) {\n      return variables[\"icon-default\"];\n    }\n    // Sinon, on utilise l'icône du bouton, ou l'icône par défaut si elle existe\n    return btn.icon || (variables[\"icon-default\"] ? variables[\"icon-default\"] : \"\");\n  };\n\n  const PostSelector = ({ value, onChangeId, onChangeType }) => {\n    const [query, setQuery] = useState(\"\");\n    \n    const excludedTypes = [\n      \"post\",\n      \"attachment\",\n      \"wp_template_part\",\n      \"wp_template\",\n      \"nav_menu_item\",\n      \"wp_navigation\",\n    ];\n\n    const allTypes = useSelect(\n      (select) => select(\"core\").getPostTypes({ per_page: -1 }),\n      [],\n    );\n\n    const allPosts = useSelect(\n      (select) => {\n        const postsByType = {};\n        if (!allTypes) return {};\n        allTypes.forEach((type) => {\n          if (excludedTypes.includes(type.slug)) return;\n          postsByType[type.slug] = select(\"core\").getEntityRecords(\n            \"postType\",\n            type.slug,\n            { per_page: -1 },\n          );\n        });\n        return postsByType;\n      },\n      [allTypes],\n    );\n\n    const options = useMemo(() => {\n      if (!allPosts || !allTypes) return [];\n\n      let allOptions = [];\n      allTypes.forEach((type) => {\n        if (excludedTypes.includes(type.slug)) return;\n\n        const posts = allPosts[type.slug];\n        if (!posts || !Array.isArray(posts)) return;\n\n        const filteredPosts = posts.filter((p) =>\n          p && p.title && p.title.rendered && \n          p.title.rendered.toLowerCase().includes(query.toLowerCase()),\n        );\n\n        if (filteredPosts.length > 0) {\n          allOptions.push({\n            value: `__group_${type.slug}`,\n            label: `--- ${type.labels.singular_name} ---`,\n            disabled: true,\n          });\n\n          filteredPosts.forEach((p) => {\n            allOptions.push({\n              value: `${type.slug}|${p.id}`,\n              label: decodeEntities(p.title?.rendered || p.title || `Post #${p.id}`),\n            });\n          });\n        }\n      });\n\n      return allOptions;\n    }, [allPosts, allTypes, query]);\n\n    return (\n      <ComboboxControl\n        label=\"Sélectionner un contenu\"\n        value={value ? options.find(opt => opt.value.endsWith(`|${value}`))?.value || \"\" : \"\"}\n        onChange={(val) => {\n          if (!val || !val.includes('|')) return;\n          \n          const [type, id] = val.split(\"|\");\n          onChangeType(type);\n          onChangeId(parseInt(id));\n        }}\n        onFilterValueChange={setQuery}\n        options={options}\n      />\n    );\n  };\n\n  const ArchiveSelector = ({ postType, onChangeType }) => {\n    const allTypes = useSelect(\n      (select) => select(\"core\").getPostTypes({ per_page: -1 }),\n      [],\n    );\n\n    const options = useMemo(() => {\n      if (!allTypes) return [];\n      return allTypes\n        .filter((t) => t.has_archive)\n        .map((t) => ({\n          value: t.slug,\n          label: decodeEntities(t.labels.name),\n        }));\n    }, [allTypes]);\n\n    return (\n      <SelectControl\n        label=\"Type de contenu (archive)\"\n        value={postType}\n        options={[{ label: \"Sélectionner...\", value: \"\" }, ...options]}\n        onChange={(val) => onChangeType(val)}\n      />\n    );\n  };\n\n  const TermSelector = ({ value, taxonomy, onChangeId, onChangeTaxo }) => {\n    const [query, setQuery] = useState(\"\");\n    const excludedTaxonomies = [\"category\"];\n    \n    const allTaxonomies = useSelect(\n      (select) => select(\"core\").getTaxonomies({ per_page: -1 }),\n      [],\n    );\n\n    const allTerms = useSelect(\n      (select) => {\n        const termsByTaxo = {};\n        if (!allTaxonomies) return {};\n        allTaxonomies.forEach((tax) => {\n          if (excludedTaxonomies.includes(tax.slug)) return;\n          termsByTaxo[tax.slug] = select(\"core\").getEntityRecords(\n            \"taxonomy\",\n            tax.slug,\n            { per_page: -1 },\n          );\n        });\n        return termsByTaxo;\n      },\n      [allTaxonomies],\n    );\n\n    const options = useMemo(() => {\n      if (!allTerms || !allTaxonomies) return [];\n\n      let allOptions = [];\n      allTaxonomies.forEach((taxo) => {\n        if (excludedTaxonomies.includes(taxo.slug)) return;\n\n        const terms = allTerms[taxo.slug];\n        if (!terms || !Array.isArray(terms)) return;\n\n        const filteredTerms = terms.filter((t) =>\n          t && t.name && \n          t.name.toLowerCase().includes(query.toLowerCase()),\n        );\n\n        if (filteredTerms.length > 0) {\n          allOptions.push({\n            value: `__group_${taxo.slug}`,\n            label: `--- ${taxo.labels.singular_name} ---`,\n            disabled: true,\n          });\n\n          filteredTerms.forEach((t) => {\n            allOptions.push({\n              value: `${taxo.slug}|${t.id}`,\n              label: decodeEntities(t.name || `Terme #${t.id}`),\n            });\n          });\n        }\n      });\n\n      return allOptions;\n    }, [allTerms, allTaxonomies, query]);\n\n    return (\n      <ComboboxControl\n        label=\"Sélectionner un terme\"\n        value={value ? options.find(opt => opt.value.endsWith(`|${value}`))?.value || \"\" : \"\"}\n        onChange={(val) => {\n          if (!val || !val.includes('|')) return;\n          \n          const [taxo, id] = val.split(\"|\");\n          onChangeTaxo(taxo);\n          onChangeId(parseInt(id));\n        }}\n        onFilterValueChange={setQuery}\n        options={options}\n      />\n    );\n  };\n\n  // Composant simplifié de sélection d'icônes (la modale est rendue au niveau parent)\n  const LucideIconPicker = ({ value, buttonIndex }) => {\n    const currentIconPreview = value && spriteUrl ? (\n      <svg\n        width=\"16\"\n        height=\"16\"\n        viewBox=\"0 0 24 24\"\n        style={{\n          marginRight: \"8px\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: 2,\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\"\n        }}\n      >\n        <use href={`${spriteUrl}#${value}`} />\n      </svg>\n    ) : null;\n\n    return (\n      <BaseControl label=\"Icône Lucide\">\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\n          {currentIconPreview}\n          <Button\n            variant=\"secondary\"\n            onClick={() => openIconPicker(buttonIndex, value)}\n            style={{ flex: 1 }}\n          >\n            {value ? `Changer l'icône (${value})` : \"Ajouter une icône\"}\n          </Button>\n          {value && (\n            <Button\n              isDestructive\n              variant=\"secondary\"\n              onClick={() => updateButton(buttonIndex, \"icon\", \"\")}\n              icon={trashIcon}\n              label=\"Supprimer l'icône\"\n            />\n          )}\n        </div>\n      </BaseControl>\n    );\n  };\n\n  const nbBtn = buttons.length;\n\n  return (\n    <>\n      <InspectorControls>\n        <PanelBody title=\"Mise en page des boutons\" initialOpen={true}>\n          <BaseControl label=\"Alignement\">\n            <ButtonGroup>\n              <Button\n                icon={justifyLeft}\n                label=\"Aligné à gauche\"\n                onClick={() => updateSettings(\"justifyValue\", \"justify-start\")}\n                isPressed={layoutSettings.justifyValue === \"justify-start\"}\n                variant={\n                  layoutSettings.justifyValue === \"justify-start\"\n                    ? \"primary\"\n                    : \"secondary\"\n                }\n              />\n              <Button\n                icon={justifyCenter}\n                label=\"Centré\"\n                onClick={() => updateSettings(\"justifyValue\", \"justify-center\")}\n                isPressed={layoutSettings.justifyValue === \"justify-center\"}\n                variant={\n                  layoutSettings.justifyValue === \"justify-center\"\n                    ? \"primary\"\n                    : \"secondary\"\n                }\n              />\n              <Button\n                icon={justifyRight}\n                label=\"Aligné à droite\"\n                onClick={() => updateSettings(\"justifyValue\", \"justify-end\")}\n                isPressed={layoutSettings.justifyValue === \"justify-end\"}\n                variant={\n                  layoutSettings.justifyValue === \"justify-end\"\n                    ? \"primary\"\n                    : \"secondary\"\n                }\n              />\n              {nbBtn > 1 && (\n                <Button\n                  icon={justifySpaceBetween}\n                  label=\"Espacé entre les boutons\"\n                  onClick={() =>\n                    updateSettings(\"justifyValue\", \"justify-between\")\n                  }\n                  isPressed={layoutSettings.justifyValue === \"justify-between\"}\n                  variant={\n                    layoutSettings.justifyValue === \"justify-between\"\n                      ? \"primary\"\n                      : \"secondary\"\n                  }\n                />\n              )}\n            </ButtonGroup>\n          </BaseControl>\n          {nbBtn > 1 && (\n            <>\n              <TextControl\n                label=\"Gap entre les boutons\"\n                onChange={(val) => updateSettings(\"gap\", val)}\n                value={layoutSettings.gap}\n              />\n              <ToggleControl\n                label=\"Retour à la ligne\"\n                checked={layoutSettings.flexWrap}\n                onChange={(val) => updateSettings(\"flexWrap\", val)}\n              />\n            </>\n          )}\n        </PanelBody>\n      </InspectorControls>\n\n      <div {...useBlockProps()}>\n        <div\n          className={`pib-buttons flex ${\n            layoutSettings.flexWrap ? \"flex-wrap\" : \"\"\n          } ${layoutSettings.justifyValue || \"\"}`}\n          style={{ gap: layoutSettings.gap }}\n        >\n          {ensureButtonIds(buttons).map((btn, index) => (\n            <div key={btn.id || `fallback-${index}`} className=\"pib-button-item\">\n              <BlockControls group=\"block\">\n                <ToolbarGroup>\n                  <Dropdown\n                    renderToggle={({ isOpen, onToggle }) => (\n                      <ToolbarButton\n                        icon={settingsIcon}\n                        label={`Bouton \"${btn.title}\"`}\n                        onClick={onToggle}\n                        isPressed={isOpen}\n                      />\n                    )}\n                    renderContent={() => (\n                      <div style={{ padding: \"0\", minWidth: \"260px\" }}>\n                        <PanelBody title=\"Lien du bouton\" initialOpen={true}>\n                          <SelectControl\n                            label=\"Type de lien\"\n                            value={btn.link?.type || \"url\"}\n                            options={[\n                              { label: \"URL personnalisée\", value: \"url\" },\n                              { label: \"Contenu (pages / CPT)\", value: \"post\" },\n                              { label: \"Archive (CPT)\", value: \"archive\" },\n                              { label: \"Terme (taxonomies)\", value: \"term\" },\n                              { label: \"Mail\", value: \"mail\" },\n                              { label: \"Téléphone\", value: \"tel\" },\n                            ]}\n                            onChange={(value) => {\n                              const currentLink = btn.link || {};\n                              updateButton(index, \"link\", { ...currentLink, type: value });\n                              if (value === \"mail\")\n                                updateButton(index, \"link\", { ...currentLink, url: \"mailto:\", type: value });\n                              if (value === \"tel\")\n                                updateButton(index, \"link\", { ...currentLink, url: \"tel:\", type: value });\n                            }}\n                          />\n\n                          {/* champs du lien */}\n                          {(btn.link?.type || \"url\") === \"url\" && (\n                            <input\n                              type=\"url\"\n                              value={btn.link?.url || \"\"}\n                              placeholder=\"https://...\"\n                              style={{ width: \"100%\", marginTop: \"10px\" }}\n                              onChange={(e) => {\n                                const currentLink = btn.link || {};\n                                updateButton(index, \"link\", { ...currentLink, url: e.target.value });\n                              }}\n                            />\n                          )}\n                          {(btn.link?.type || \"url\") === \"mail\" && (\n                            <input\n                              type=\"email\"\n                              value={(btn.link?.url || \"\").replace(\"mailto:\", \"\")}\n                              placeholder=\"email@example.com\"\n                              style={{ width: \"100%\", marginTop: \"10px\" }}\n                              onChange={(e) => {\n                                const currentLink = btn.link || {};\n                                updateButton(\n                                  index,\n                                  \"link\",\n                                  { ...currentLink, url: `mailto:${e.target.value}` }\n                                );\n                              }}\n                            />\n                          )}\n                          {(btn.link?.type || \"url\") === \"tel\" && (\n                            <input\n                              type=\"tel\"\n                              value={(btn.link?.url || \"\").replace(\"tel:\", \"\")}\n                              placeholder=\"+33612345678\"\n                              style={{ width: \"100%\", marginTop: \"10px\" }}\n                              onChange={(e) => {\n                                const currentLink = btn.link || {};\n                                updateButton(\n                                  index,\n                                  \"link\",\n                                  { ...currentLink, url: `tel:${e.target.value}` }\n                                );\n                              }}\n                            />\n                          )}\n                          {(btn.link?.type || \"url\") === \"post\" && (\n                            <PostSelector\n                              value={btn.link?.postId || 0}\n                              onChangeId={(id) => {\n                                const currentLink = btn.link || {};\n                                const newLink = { ...currentLink, postId: id };\n                                updateButton(index, \"link\", newLink);\n                              }}\n                              onChangeType={(type) => {\n                                const currentLink = btn.link || {};\n                                // Pour les posts individuels, on sauvegarde le type du post automatiquement\n                                const newLink = { ...currentLink, postType: type };\n                                updateButton(index, \"link\", newLink);\n                              }}\n                            />\n                          )}\n                          {(btn.link?.type || \"url\") === \"archive\" && (\n                            <ArchiveSelector\n                              postType={btn.link?.postType || \"\"}\n                              onChangeType={(type) => {\n                                const currentLink = btn.link || {};\n                                updateButton(index, \"link\", { ...currentLink, postType: type });\n                              }}\n                            />\n                          )}\n                          {(btn.link?.type || \"url\") === \"term\" && (\n                            <TermSelector\n                              value={btn.link?.termId || 0}\n                              taxonomy={btn.link?.taxonomy || \"\"}\n                              onChangeId={(id) => {\n                                const currentLink = btn.link || {};\n                                const newLink = { ...currentLink, termId: id };\n                                updateButton(index, \"link\", newLink);\n                              }}\n                              onChangeTaxo={(taxo) => {\n                                const currentLink = btn.link || {};\n                                const newLink = { ...currentLink, taxonomy: taxo };\n                                updateButton(index, \"link\", newLink);\n                              }}\n                            />\n                          )}\n                          {/* Affichage conditionnel du contrôle target=\"_blank\" */}\n                          {![\"mail\", \"tel\"].includes(btn.link?.type || \"url\") && (\n                            <div style={{ marginTop: \"10px\" }}>\n                              <ToggleControl\n                                label=\"Ouvrir dans un nouvel onglet\"\n                                checked={(btn.link?.target || \"\") === \"_blank\"}\n                                onChange={(val) => {\n                                  const currentLink = btn.link || {};\n                                  updateButton(index, \"link\", { ...currentLink, target: val ? \"_blank\" : \"\" });\n                                }}\n                              />\n                            </div>\n                          )}\n                        </PanelBody>\n\n                        <PanelBody\n                          title=\"Apparence du bouton\"\n                          initialOpen={true}\n                        >\n                          {loadingStyles ? (\n                            <Spinner />\n                          ) : (\n                            <SelectControl\n                              label=\"Style du bouton\"\n                              value={btn.type}\n                              options={buttonStyles}\n                              onChange={(value) => {\n                                updateButton(index, \"type\", value);\n                                // Mettre à jour la position d'icône selon le nouveau style\n                                const defaultPos = getDefaultIconPosition(value);\n                                updateButton(index, \"icon_position\", defaultPos);\n                                // Mettre à jour l'icône par défaut si nécessaire\n                                const defaultIcon = getDefaultIcon(value);\n                                const variables = getButtonStyleVariables(value);\n                                // Si les icônes sont désactivées mais qu'il y a une icône par défaut, on l'applique\n                                if (variables[\"icon\"] === \"false\" && variables[\"icon-default\"]) {\n                                  updateButton(index, \"icon\", defaultIcon);\n                                } else if (!btn.icon && variables[\"icon-default\"]) {\n                                  // Si pas d'icône actuelle et qu'il y a une icône par défaut définie, l'appliquer\n                                  updateButton(index, \"icon\", defaultIcon);\n                                }\n                              }}\n                            />\n                          )}\n\n                          {/* Affichage conditionnel du sélecteur d'icône Lucide */}\n                          {areIconsEnabled(btn.type) && (\n                            <div style={{ marginTop: \"16px\" }}>\n                              <LucideIconPicker\n                                value={btn.icon || \"\"}\n                                buttonIndex={index}\n                              />\n                            </div>\n                          )}\n\n                          {/* Affichage conditionnel de la position d'icône */}\n                          {btn.icon && areIconsEnabled(btn.type) && isIconMoveEnabled(btn.type) && (\n                            <div style={{ marginTop: \"12px\" }}>\n                              <BaseControl label=\"Position de l'icône\">\n                                <ToggleGroupControl\n                                  value={btn.icon_position || getDefaultIconPosition(btn.type)}\n                                  onChange={(value) =>\n                                    updateButton(index, \"icon_position\", value)\n                                  }\n                                  isBlock\n                                >\n                                  <ToggleGroupControlOption\n                                    value=\"before\"\n                                    label=\"Avant le texte\"\n                                  />\n                                  <ToggleGroupControlOption\n                                    value=\"after\"\n                                    label=\"Après le texte\"\n                                  />\n                                </ToggleGroupControl>\n                              </BaseControl>\n                            </div>\n                          )}\n\n                          {/* Messages informatifs si les fonctionnalités sont désactivées */}\n                          {(!areIconsEnabled(btn.type) || !isIconMoveEnabled(btn.type)) && (\n                            <div style={{ \n                              marginTop: \"12px\", \n                              padding: \"8px\", \n                              backgroundColor: \"#f0f0f0\", \n                              borderRadius: \"4px\",\n                              fontSize: \"12px\",\n                              color: \"#666\"\n                            }}>\n                              {!areIconsEnabled(btn.type) && (\n                                <div>Les icônes sont désactivées pour ce style de bouton</div>\n                              )}\n                              {areIconsEnabled(btn.type) && !isIconMoveEnabled(btn.type) && (\n                                <div>La position de l'icône est fixe pour ce style de bouton</div>\n                              )}\n                            </div>\n                          )}\n                        </PanelBody>\n                      </div>\n                    )}\n                  />\n                </ToolbarGroup>\n              </BlockControls>\n\n              <div className=\"pib-button-wrapper\">\n                <span className={`pib-button ${btn.type}`} style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                  {shouldShowIcon(btn) && ((btn.icon_position || getDefaultIconPosition(btn.type)) === 'before') && (\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" style={{ fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round' }}>\n                      <use href={`${window.siteforgeConfig?.spriteUrl || ''}#${getDisplayIcon(btn)}`} />\n                    </svg>\n                  )}\n                  <RichText\n                    tagName=\"span\"\n                    value={btn.title}\n                    placeholder=\"Texte du bouton\"\n                    onChange={(value) => updateButton(index, \"title\", value)}\n                    allowedFormats={[]}\n                    withoutInteractiveFormatting\n                  />\n                  {shouldShowIcon(btn) && ((btn.icon_position || getDefaultIconPosition(btn.type)) === 'after') && (\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" style={{ fill: 'none', stroke: 'currentColor', strokeWidth: 2, strokeLinecap: 'round', strokeLinejoin: 'round' }}>\n                      <use href={`${window.siteforgeConfig?.spriteUrl || ''}#${getDisplayIcon(btn)}`} />\n                    </svg>\n                  )}\n                </span>\n\n                <Button\n                  isDestructive\n                  onClick={() => removeButton(index)}\n                  className=\"pib-remove-btn\"\n                  label=\"Supprimer\"\n                  showTooltip\n                  icon={trashIcon}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <Button\n          variant=\"primary\"\n          onClick={addButton}\n          style={{ marginTop: \"12px\" }}\n        >\n          + Ajouter un bouton\n        </Button>\n      </div>\n\n      {/* Modale de sélection d'icônes (rendue au niveau racine pour éviter les problèmes de z-index) */}\n      {iconPickerState.isOpen && (\n        <Modal\n          title=\"Sélectionner une icône Lucide\"\n          onRequestClose={closeIconPicker}\n          className=\"sif-icon-picker-modal\"\n          overlayClassName=\"sif-icon-picker-overlay\"\n        >\n          <div>\n            <SearchControl\n              value={iconSearchQuery}\n              onChange={setIconSearchQuery}\n              placeholder=\"Rechercher une icône...\"\n              style={{ marginBottom: \"16px\" }}\n            />\n\n            {iconSearchQuery && (\n              <div style={{ marginBottom: \"8px\", fontSize: \"12px\", color: \"#666\" }}>\n                {sprintf(\n                  _n(\n                    '%1$s résultat pour \"%2$s\"',\n                    '%1$s résultats pour \"%2$s\"',\n                    lucideIcons.filter(icon => icon.toLowerCase().includes(iconSearchQuery.toLowerCase())).length,\n                    'siteforge'\n                  ),\n                  new Intl.NumberFormat(\"fr-FR\").format(lucideIcons.filter(icon => icon.toLowerCase().includes(iconSearchQuery.toLowerCase())).length),\n                  iconSearchQuery\n                )}\n              </div>\n            )}\n\n            {loadingIcons ? (\n              <div style={{ textAlign: \"center\", padding: \"40px\" }}>\n                <Spinner />\n                <p style={{ marginTop: \"12px\", color: \"#666\" }}>\n                  Chargement des icônes...\n                </p>\n              </div>\n            ) : (\n              <>\n                <div style={{\n                  display: \"grid\",\n                  gridTemplateColumns: \"repeat(auto-fill, minmax(50px, 1fr))\",\n                  gap: \"4px\",\n                  maxHeight: \"400px\",\n                  overflowY: \"auto\",\n                  border: \"1px solid #ddd\",\n                  borderRadius: \"4px\",\n                  padding: \"12px\",\n                  width: \"400px\",\n                }}>\n                  {lucideIcons\n                    .filter(icon => icon.toLowerCase().includes(iconSearchQuery.toLowerCase()))\n                    .slice(0, 100)\n                    .map((iconSlug) => (\n                      <Button\n                        key={iconSlug}\n                        variant={iconPickerState.currentValue === iconSlug ? \"primary\" : \"secondary\"}\n                        onClick={() => handleIconSelect(iconSlug)}\n                        style={{\n                          display: \"flex\",\n                          alignItems: \"center\",\n                          justifyContent: \"center\",\n                          padding: \"8px\",\n                          minHeight: \"40px\",\n                          minWidth: \"40px\",\n                        }}\n                        title={iconSlug}\n                      >\n                        <svg\n                          width=\"20\"\n                          height=\"20\"\n                          viewBox=\"0 0 24 24\"\n                          style={{\n                            fill: \"none\",\n                            stroke: \"currentColor\",\n                            strokeWidth: 2,\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\"\n                          }}\n                        >\n                          <use href={`${spriteUrl}#${iconSlug}`} />\n                        </svg>\n                      </Button>\n                    ))}\n                </div>\n\n                {lucideIcons.filter(icon => icon.toLowerCase().includes(iconSearchQuery.toLowerCase())).length > 100 && (\n                  <p style={{ textAlign: \"center\", color: \"#888\", fontSize: \"12px\", marginTop: \"12px\" }}>\n                    ... et {new Intl.NumberFormat(\"fr-FR\").format(lucideIcons.filter(icon => icon.toLowerCase().includes(iconSearchQuery.toLowerCase())).length - 100)} autres résultats. Affinez votre recherche\n                  </p>\n                )}\n              </>\n            )}\n\n            {!loadingIcons && lucideIcons.filter(icon => icon.toLowerCase().includes(iconSearchQuery.toLowerCase())).length === 0 && (\n              <p style={{ textAlign: \"center\", color: \"#666\", marginTop: \"20px\" }}>\n                Aucune icône trouvée pour \"{iconSearchQuery}\"\n              </p>\n            )}\n          </div>\n        </Modal>\n      )}\n    </>\n  );\n}\n","import { registerBlockType } from \"@wordpress/blocks\";\nimport metadata from \"./block.json\";\nimport edit from \"./edit\";\nimport \"./style.scss\";\n\nregisterBlockType(metadata.name, {\n  icon: {\n    src: (\n        <svg xmlns='http://www.w3.org/2000/svg' width='552' height='424' fill='none' viewBox='0 0 552 424'>\n          <path fill='currentColor' fill-rule='evenodd' d='M439.86 30.456H112.347c-45.049 0-81.568 36.52-81.568 81.568 0 45.049 36.52 81.569 81.568 81.569H439.86c45.049 0 81.568-36.52 81.568-81.569s-36.519-81.568-81.568-81.568Zm-327.513-30C50.73.456.779 50.406.779 112.024c0 61.618 49.95 111.569 111.568 111.569H439.86c61.617 0 111.568-49.951 111.568-111.569C551.428 50.407 501.477.456 439.86.456H112.347Z' clip-rule='evenodd'/><path fill='white' d='M448.627 192.55c12.759-7.367 29.788-2.804 37.154 9.955l27.199 47.11c22.666 39.259 8.901 89.082-29.866 111.464l-47.111 27.199c-21.101 12.183-46.887 13.985-68.789 4.383l-79.222-34.087c-4.927-1.735-8.175-5.094-10.442-9.02-6.516-11.287-2.783-25.22 7.522-31.169 6.38-3.684 13.968-4.139 20.728-1.498l40.431 17.373c2.652 1.139 5.226-1.757 3.783-4.257l-86.998-150.684c-6.233-10.796-2.99-24.445 8.297-30.962 10.796-6.233 24.729-2.5 30.962 8.296l38.594 66.847c1.336 2.315 5.069 1.917 6.468-.36 2.133-3.469 5.184-6.51 9.173-8.814 9.034-5.216 19.897-4.361 28.473 1.25 2.3 1.505 6.234-.008 6.994-2.65 1.816-6.308 5.932-12.032 12.251-15.68 9.984-5.765 22.201-4.114 31.097 3.176 1.667 1.366 4.307.945 5.535-.826 1.893-2.731 4.399-5.102 7.767-7.046Z'/><path fill='currentColor' fill-rule='evenodd' d='m305.8 316.887 40.431 17.373c2.652 1.139 5.226-1.757 3.783-4.256L263.016 179.32c-6.233-10.797-2.99-24.446 8.297-30.963 10.796-6.233 24.729-2.499 30.962 8.297l38.594 66.846c1.336 2.315 5.069 1.917 6.468-.36 1.718-2.794 4.031-5.311 6.951-7.387a27.743 27.743 0 0 1 2.222-1.426c.744-.43 1.5-.818 2.267-1.166 8.541-3.877 18.336-2.733 26.206 2.415 2.3 1.505 6.234-.008 6.994-2.65 1.816-6.308 5.932-12.032 12.251-15.68 9.984-5.765 22.201-4.114 31.097 3.176 1.667 1.366 4.308.945 5.536-.826 1.892-2.731 4.398-5.102 7.766-7.046 12.759-7.366 29.788-2.803 37.154 9.956l27.199 47.11c22.666 39.258 8.901 89.081-29.866 111.464l-47.11 27.199c-21.102 12.183-46.888 13.984-68.79 4.382l-79.222-34.086c-4.927-1.735-8.175-5.095-10.442-9.02-6.516-11.287-2.783-25.22 7.522-31.17 6.38-3.683 13.969-4.139 20.728-1.498Zm-27.065 64.92 78.527 33.788c29.507 12.902 63.61 10.288 91.242-5.666l47.11-27.199c50.627-29.229 68.643-94.301 39.017-145.614l-27.199-47.11c-14.27-24.717-46.589-33.377-71.305-19.107-.502.29-.996.586-1.482.888-13.542-4.766-29.053-4.196-42.917 3.808a51.399 51.399 0 0 0-13.333 11.037c-9.218-1.611-18.962-.796-28.209 3.006l-26.261-45.484c-13.136-22.754-42.359-30.584-65.112-17.447-23.598 13.624-30.378 42.716-17.447 65.113l56.814 98.405a48.627 48.627 0 0 0-25.608 6.509c-22.96 13.256-29.683 42.786-16.673 65.321 4.337 7.51 11.498 15.47 22.836 19.752Z' clip-rule='evenodd'/>\n        </svg>\n    ),\n  },\n  edit,\n});\n"],"names":["LucideIcon","children","props","React","createElement","xmlns","viewBox","width","height","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","justifyLeft","d","justifyCenter","justifyRight","justifySpaceBetween","settingsIcon","cx","cy","r","trashIcon","x1","x2","y1","y2","registerBlockType","metadata","icon","src","edit","attributes","setAttributes","clientId","console","log","window","siteforgeConfig","data","settings","justifyValue","flexWrap","gap","buttons","ensureButtonIds","buttonsArray","map","btn","index","id","Date","now","layoutSettings","buttonStyles","setButtonStyles","useState","buttonStylesData","setButtonStylesData","loadingStyles","setLoadingStyles","iconPickerState","setIconPickerState","isOpen","buttonIndex","currentValue","lucideIcons","setLucideIcons","loadingIcons","setLoadingIcons","iconSearchQuery","setIconSearchQuery","spriteUrl","_a","useEffect","length","async","apiFetch","path","icons","error","fetchIcons","closeIconPicker","some","buttonsWithIds","styles","styleOptions","style","label","variables","title","name","replace","value","fetchStyles","updateSettings","key","updateButton","newButtons","link","url","target","type","postId","termId","taxonomy","postType","decodeEntities","html","textarea","document","innerHTML","getButtonStyleVariables","buttonType","styleData","find","areIconsEnabled","isIconMoveEnabled","getDefaultIconPosition","getDefaultIcon","shouldShowIcon","getDisplayIcon","PostSelector","onChangeId","onChangeType","query","setQuery","excludedTypes","allTypes","useSelect","select","getPostTypes","per_page","allPosts","postsByType","forEach","includes","slug","getEntityRecords","options","useMemo","allOptions","posts","Array","isArray","filteredPosts","filter","p","rendered","toLowerCase","push","labels","singular_name","disabled","ComboboxControl","opt","endsWith","onChange","val","split","parseInt","onFilterValueChange","ArchiveSelector","t","has_archive","SelectControl","TermSelector","onChangeTaxo","excludedTaxonomies","allTaxonomies","getTaxonomies","allTerms","termsByTaxo","tax","taxo","terms","filteredTerms","LucideIconPicker","currentIconPreview","marginRight","href","BaseControl","display","alignItems","Button","variant","onClick","openIconPicker","flex","isDestructive","nbBtn","Fragment","InspectorControls","PanelBody","initialOpen","ButtonGroup","isPressed","TextControl","ToggleControl","checked","useBlockProps","className","BlockControls","group","ToolbarGroup","Dropdown","renderToggle","onToggle","ToolbarButton","renderContent","padding","minWidth","currentLink","_b","_c","placeholder","marginTop","e","_d","_e","_f","_g","_h","_i","newLink","_j","_k","_l","_m","_n","_o","_p","Spinner","defaultPos","defaultIcon","ToggleGroupControl","icon_position","isBlock","ToggleGroupControlOption","backgroundColor","borderRadius","fontSize","color","RichText","tagName","allowedFormats","withoutInteractiveFormatting","i","splice","removeButton","showTooltip","defaultButtonType","defaultIconPosition","Math","random","toString","substr","class","download","Modal","onRequestClose","overlayClassName","SearchControl","marginBottom","sprintf","Intl","NumberFormat","format","textAlign","gridTemplateColumns","maxHeight","overflowY","border","slice","iconSlug","handleIconSelect","justifyContent","minHeight"],"mappings":"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"}